# 几何题自动画图功能使用指南

## ✅ 已实现功能

**可以！系统现在支持自动生成带图形的几何题！**

### 支持的图形类型
- ✅ **正方形** - 自动标注边长
- ✅ **长方形** - 自动标注长和宽
- ✅ **圆形** - 自动标注半径
- ✅ **三角形** - 自动标注底和高

### 特性
- ✅ 自动绘制标准几何图形
- ✅ 自动添加尺寸标注
- ✅ 网格背景（方便学生理解比例）
- ✅ SVG矢量图（打印清晰）
- ✅ 嵌入HTML，可直接打印为PDF

---

## 🚀 快速开始

### 方式一：使用演示脚本（推荐）

生成5道带图形的几何题：
```bash
python3 generate_geometry_demo.py
```

输出文件：`output/geometry_demo.html`

### 方式二：自定义生成

编辑并运行：
```python
from mistake_generator.geometry_drawer import GeometryDrawer

drawer = GeometryDrawer(grid_size=25)

# 生成长方形（长8cm，宽5cm）
svg = drawer.draw_shape("rectangle", {"length": 8, "width": 5})

# 生成正方形（边长6m）
svg = drawer.draw_shape("square", {"side": 6})

# 生成圆形（半径4cm）
svg = drawer.draw_shape("circle", {"radius": 4})

# 生成三角形（底8cm，高6cm）
svg = drawer.draw_shape("triangle", {"base": 8, "height": 6})
```

---

## 📊 生成示例

### 刚才生成的几何题练习卷包含：

1. **正方形周长问题**
   - 题目：一个正方形的边长是6厘米，它的周长是多少厘米？
   - 图形：自动绘制6cm边长的正方形
   - 答案：24厘米

2. **长方形周长问题**
   - 题目：一个长方形的长是8米，宽是5米，它的周长是多少米？
   - 图形：自动绘制8m×5m的长方形
   - 答案：26米

3-5题：更多周长、面积相关问题...

---

## 🎨 图形特点

### 自动标注
- **长方形**：标注长度和宽度
- **正方形**：标注边长
- **圆形**：标注半径，显示圆心
- **三角形**：标注底边和高，虚线显示高

### 网格背景
- 帮助学生理解图形比例
- 可以数格子验证尺寸
- 可选择显示/隐藏

### 专业排版
- 清晰的题号和题目
- 图形居中显示
- 答题区域
- 独立的答案页

---

## 🔧 集成到错题系统

### 未来可以这样使用：

```bash
# 扫描图片时，如果识别到几何题
python3 main.py scan

# 生成错题卷时，自动为几何题添加图形
python3 main.py generate --include-geometry-shapes
```

### 需要的扩展（可选）：

1. 修改 `image_analyzer.py` 识别几何题参数
2. 修改 `question_generator.py` 生成几何相似题
3. 修改 `html_generator.py` 嵌入图形
4. 添加更多图形类型（梯形、平行四边形等）

---

## 📝 使用场景

### 场景1：几何专项练习
```bash
python3 generate_geometry_demo.py
# 生成5道不同类型的几何题
```

### 场景2：混合练习（计算题+几何题）
可以手动编辑HTML，将计算题和几何题组合

### 场景3：自定义题目
编写Python脚本，指定具体的题目内容和图形参数

---

## 🎯 示例效果

生成的HTML文件包含：

```
第 1 题
一个正方形的边长是6厘米，它的周长是多少厘米？

[自动生成的正方形图形]
- 带网格背景
- 边长标注：6米
- 绿色边框

解答区域：
[空白区域供学生作答]

---

参考答案
第 1 题：周长 = 6 × 4 = 24厘米
```

---

## 💡 高级用法

### 自定义图形样式

编辑 `geometry_drawer.py`：
- 修改 `grid_size` 改变图形比例
- 修改颜色（如 `stroke="#2196F3"`）
- 修改线宽（如 `stroke-width="2"`）

### 添加新图形类型

在 `GeometryDrawer` 类中添加新方法：
```python
def _draw_trapezoid(self, params, ...):
    """绘制梯形"""
    # 实现代码
```

---

## 📂 相关文件

- **几何绘图模块**：`mistake_generator/geometry_drawer.py`
- **演示脚本**：`generate_geometry_demo.py`
- **测试脚本**：`test_geometry.py`
- **生成的练习卷**：`output/geometry_demo.html`

---

## ❓ 常见问题

**Q: 图形会模糊吗？**
A: 不会！使用SVG矢量图，无论缩放多少倍都清晰。

**Q: 可以自定义图形大小吗？**
A: 可以！修改 `grid_size` 参数或图形的 `width`/`height`。

**Q: 支持更复杂的图形吗？**
A: 当前支持基础图形。复杂图形（如组合图形）需要扩展代码。

**Q: 能生成立体图形吗？**
A: 当前是2D平面图形。3D图形需要使用更复杂的绘图库。

**Q: 可以导出为单独的图片吗？**
A: SVG可以在浏览器中另存为PNG/JPG图片。

---

## 🎉 总结

**是的，系统现在完全支持自动画图的几何题生成！**

### 当前能力
✅ 自动生成几何题目
✅ 自动绘制对应图形
✅ 自动标注尺寸
✅ 生成完整的HTML练习卷
✅ 可打印为PDF

### 试试看
```bash
python3 generate_geometry_demo.py
```

然后用浏览器打开 `output/geometry_demo.html` 查看效果！

---

**下一步建议**：
1. 将几何题功能集成到主系统
2. 支持从错题图片中识别几何题参数
3. 添加更多图形类型
4. 支持图形组合题

有任何问题或需要调整，随时告诉我！📐
